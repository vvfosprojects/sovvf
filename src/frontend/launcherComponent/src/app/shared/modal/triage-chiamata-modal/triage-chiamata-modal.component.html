<div class="modal-header">
    <h4 class="modal-title">{{ 'Triage' | uppercase }}</h4>
    <button type="button" class="btn btn-light close" style="margin: 2px 2px 0 0; padding: 2px 4px 4px 4px"
            (click)="closeModal('ko')">
        <i class="fa fa-times text-danger"></i>
    </button>
</div>
<div class="modal-body height font-xlarge py-4 px-5">
    <div class="h5">
        <span class="d-inline-block mr-1">Tipologia Selezionata:</span>
        <span class="d-inline-block font-weight-bolder">{{ tipologiaSelezionata?.codiceDescrizione }}</span>
    </div>
    <div *ngIf="dettaglioTipologiaSelezionato" class="h5">
        <span class="d-inline-block mr-1">Dettaglio Tipologia Selezionata:</span>
        <span class="d-inline-block font-weight-bolder">{{ dettaglioTipologiaSelezionato?.descrizione }}</span>
    </div>
    <hr class="mt-3 mb-0">
    <ng-template [ngIf]="dettagliTipologia?.length && !dettaglioTipologiaSelezionato">
        <app-step-dettaglio-tipologia [dettagliTipologie]="dettagliTipologia"
                                      (changeDettaglioTipologia)="onChangeDettaglioTipologia($event)">
        </app-step-dettaglio-tipologia>
    </ng-template>
    <ng-template [ngIf]="!dettagliTipologia?.length && !dettaglioTipologiaSelezionato">
        <div class="alert alert-danger font-weight-bold mt-3 mb-0">
            Nessun Dettaglio Tipologia presente per "{{ tipologiaSelezionata?.descrizione }}".
            <small class="d-block">Puoi gestire i Dettagli Tipologia nella pagina "Impostazioni
                Sede".</small>
        </div>
    </ng-template>
    <ng-template [ngIf]="!triage && dettaglioTipologiaSelezionato">
        <div class="alert alert-danger font-weight-bold mb-0">
            Nessuna domanda disponibile per "{{ dettaglioTipologiaSelezionato?.descrizione }}".
            <small class="d-block">Puoi gestire le domande per i Dettagli Tipologia nella pagina "Impostazioni
                Sede".</small>
        </div>
    </ng-template>
    <ng-template [ngIf]="!dettagliTipologia?.length || dettaglioTipologiaSelezionato">
        <div *ngFor="let summary of triageSummary" class="alert alert-info">
            <h5 class="mb-0">
                {{ getDomandaByCodice(summary.rispostaValue)?.text }}
                <b>{{ summary.risposta }}</b>
            </h5>
        </div>
        <app-step-domande [triage]="triage"
                          (risposta)="setRisposta($event)">
        </app-step-domande>
    </ng-template>
</div>
<div class="modal-footer">
    <div class="clearfix w-100">
        <div class="float-left mt-2" ngbTooltip="Necessaria la compilazione dei campi obbligatori"
             [disableTooltip]="!disableEmergenza">
            <app-checkbox
                    [checkboxState]="{ id: 'check-chiamata-emergenza', status: checkedEmergenza, label: 'SEGNALA URGENZA E CONDIVIDI IN GESTIONE', disabled: checkedEmergenza || disableEmergenza }"
                    (click)="setEmergenza()">
            </app-checkbox>
        </div>
        <div class="float-right">
            <button type="button" class="btn btn-lg btn-danger btn-no-hover" (click)="closeModal('success')">
                {{ 'Chiudi Triage' | uppercase }}
            </button>
        </div>
    </div>
</div>
