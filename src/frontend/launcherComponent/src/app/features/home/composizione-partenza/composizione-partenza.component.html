<div class="row">
    <div class="col-12">
        <div *ngIf="richiesta"
             class="my-1">
            <div class="w-100 rounded"
                 [class.card-shadow]="!nightMode"
                 [ngClass]="cardClasses(richiesta)">
                <app-sintesi-richiesta [richiesta]="richiesta"
                                       [fissata]="false"
                                       [inGestione]="true"
                                       [partenza]="true"
                                       [modificabile]="false"
                                       [gestibile]="false"
                                       [boxAzioni]="false"
                                       [nightMode]="nightMode"
                                       (actionMezzo)="onActionMezzo($event)">
                </app-sintesi-richiesta>
            </div>
        </div>
    </div>
    <div class="col-12">
        <app-filterbar-composizione [filtri]="filtri$ | async"
                                    [nightMode]="nightMode"
                                    [competenze]="richiesta?.competenze"
                                    [disableComposizioneMode]="loadingListe"
                                    [composizionePartenza]="true"
                                    [loadingSquadre]="loadingSquadre$ | async"
                                    [loadingMezzi]="loadingMezzi$ | async"
                                    [triageSummary]="summary$ | async">
        </app-filterbar-composizione>
    </div>
    <div class="col-12">
        <div *ngIf="richiesta && compPartenzaMode === Composizione.Veloce"
             class="px-3">
            <app-composizione-veloce [richiesta]="richiesta"
                                     [nightMode]="nightMode"
                                     [loadingInvioPartenza]="loadingInvioPartenza$ | async"
                                     [boxAttivi]="boxAttivi"
                                     [triageSummary]="summary$ | async"
                                     [preAccoppiati]="preAccoppiati$ | async"
                                     [idPreAccoppiatoSelezionato]="idPreAccoppiatoSelezionato$ | async"
                                     [idPreAccoppiatiSelezionati]="idPreAccoppiatiSelezionati$ | async"
                                     [idPreAccoppiatiOccupati]="idPreAccoppiatiOccupati$ | async"
                                     [idPreaccoppiatoHover]="idPreaccoppiatoHover$ | async"
                                     [currentPagePreaccoppiati]="currentPagePreaccoppiati$ | async"
                                     [totalItemsPreaccoppiati]="totalItemsPreaccoppiati$ | async"
                                     [pageSizePreaccoppiati]="pageSizePreaccoppiati$ | async"
                                     (sendDirection)="onSendDirection($event)"
                                     (clearDirection)="onClearDirection()"
                                     (centraMappa)="centraMappa()">
            </app-composizione-veloce>
        </div>
    </div>
    <div class="col-12">
        <div *ngIf="richiesta && compPartenzaMode === Composizione.Avanzata"
             class="px-3">
            <app-composizione-avanzata [richiesta]="richiesta"
                                       [nightMode]="nightMode"
                                       [loadingInvioPartenza]="loadingInvioPartenza$ | async"
                                       [boxAttivi]="boxAttivi"
                                       [triageSummary]="summary$ | async"
                                       [mezziComposizione]="mezziComposizione$ | async"
                                       [idMezzoSelezionato]="idMezzoSelezionato$ | async"
                                       [idMezziInPrenotazione]="idMezziInPrenotazione$ | async"
                                       [idMezziPrenotati]="idMezziPrenotati$ | async"
                                       [idMezziBloccati]="idMezziBloccati$ | async"
                                       [idMezzoHover]="idMezzoHover$ | async"
                                       [squadreComposizione]="squadraComposizione$ | async"
                                       [idSquadreSelezionate]="idSquadreSelezionate$ | async"
                                       [idSquadraHover]="idSquadraHover$ | async"
                                       [filtriSelezionati]="filtriSelezionati$ | async"
                                       [boxPartenzaList]="boxPartenzaList$ | async"
                                       [austistaInPartenza]="austistaInPartenza"
                                       [idBoxPartenzaSelezionato]="idBoxPartenzaSelezionato$ | async"
                                       [loadingListe]="loadingListe$ | async"
                                       [loadingSquadre]="loadingSquadre$ | async"
                                       [loadingMezzi]="loadingMezzi$ | async"
                                       [currentPageMezzi]="currentPageMezzi$ | async"
                                       [totalItemsMezzi]="totalItemsMezzi$ | async"
                                       [pageSizeMezzi]="pageSizeMezzi$ | async"
                                       [currentPageSquadre]="currentPageSquadre$ | async"
                                       [totalItemsSquadre]="totalItemsSquadre$ | async"
                                       [pageSizeSquadre]="pageSizeSquadre$ | async"
                                       [disableNuovaPartenza]="disableNuovaPartenza$ | async"
                                       [disableConfirmPartenza]="disableConfirmPartenza$ | async"
                                       (sendDirection)="onSendDirection($event)"
                                       (clearDirection)="onClearDirection()"
                                       (centraMappa)="centraMappa()"
                                       (sganciamento)="onSganciamento($event)"
                                       (changeRicercaSquadre)="changeRicercaSquadre($event)"
                                       (changeRicercaMezzi)="changeRicercaMezzi($event)">
            </app-composizione-avanzata>
        </div>
    </div>
</div>
