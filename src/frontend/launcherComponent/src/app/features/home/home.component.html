<div *ngIf="(navbarLoaded | async)">
    <div class="clearfix">
        <div class="float-left"
             style="max-height: 900px; overflow-x: hidden; overflow-y: auto"
             [class.w-100]="((doubleMonitor$ | async) === false)"
             [class.w-50]="(doubleMonitor$ | async)">
            <div class="clearfix"
                 [class.mt-1]="viewState.composizione.active">
                <!-- Info Aggregate -->
                <div class="float-left w-100"
                     [class.d-none]="!boxAttivi || viewState.chiamata.active || viewState.modifica.active || viewState.composizione.active">
                    <app-info-aggregate [nightMode]="(nightMode$ | async)"></app-info-aggregate>
                </div>
                <!-- Filterbar -->
                <div class="float-left w-100 px-2"
                     [class.mt-3]="!boxAttivi || viewState.chiamata.active || viewState.modifica.active"
                     [class.d-none]="viewState.composizione.active">
                    <app-filterbar [colorButton]="(colorButton$ | async)"
                                   [doubleMonitor]="(doubleMonitor$ | async)"
                                   [viewState]="viewState"
                                   [nightMode]="(nightMode$ | async)">
                    </app-filterbar>
                </div>
                <div class="float-left w-100 pl-2 pr-3">
                    <!-- Richieste -->
                    <app-richieste *ngIf="viewState.richieste.active"
                                   [nightMode]="(nightMode$ | async)"
                                   [split]="viewState.richieste.split"
                                   [boxAttivi]="boxAttivi">
                    </app-richieste>
                    <div *ngIf="(doubleMonitor$ | async) === false">
                        <div class="mt-2 d-none" style="height:740px"
                             [class.d-block]="viewState.mappa.active">
                            <app-maps [viewStateMappa]="(viewStateMappa$ | async)"
                                      [boxAttivi]="boxAttivi"
                                      (mapFullLoaded)="onMapFullLoaded()">
                            </app-maps>
                        </div>
                    </div>
                    <!-- Scheda Richiesta -->
                    <app-scheda-richiesta
                            *ngIf="viewState.chiamata.active || viewState.modifica.active"></app-scheda-richiesta>
                    <!-- Coda Chiamate -->
                    <app-coda-chiamate *ngIf="viewState.codaChiamate.active"></app-coda-chiamate>
                    <!-- Composizione Partenza -->
                    <app-composizione-partenza *ngIf="viewState.composizione.active"
                                               [doubleMonitor]="(doubleMonitor$ | async)"
                                               [nightMode]="(nightMode$ | async)"
                                               [boxAttivi]="boxAttivi"
                                               [compPartenzaMode]="(composizioneMode$ | async)">
                    </app-composizione-partenza>
                    <!-- Mezzi in Servizio -->
                    <app-mezzi-in-servizio *ngIf="viewState.mezziInServizio.active"
                                           [nightMode]="(nightMode$ | async)"
                                           [boxAttivi]="boxAttivi">
                    </app-mezzi-in-servizio>
                    <!-- Schede Contatto -->
                    <app-schede-contatto *ngIf="viewState.schedeContatto.active"
                                         [nightMode]="(nightMode$ | async)"
                                         [boxAttivi]="boxAttivi">
                    </app-schede-contatto>
                </div>
            </div>
        </div>
        <!-- Mappa -->
        <div *ngIf="(doubleMonitor$ | async)"
             style="height: 925px"
             class="float-left w-50 px-2">
            <div class="clearfix h-100"
                 [class.mt-1]="!boxAttivi && !viewState.chiamata.active && !viewState.modifica.active"
                 [class.mt-2]="viewState.chiamata.active || viewState.composizione.active || viewState.modifica.active">
                <div class="float-left w-100 h-100"
                     [class.d-none]="(((doubleMonitor$ | async) === false) && (viewState.richieste.active || viewState.modifica.active || viewState.composizione.active || viewState.mezziInServizio.active || viewState.schedeContatto.active))">
                    <app-maps [viewStateMappa]="(viewStateMappa$ | async)"
                              [boxAttivi]="boxAttivi"
                              (mapFullLoaded)="onMapFullLoaded()">
                    </app-maps>
                </div>
            </div>
        </div>
    </div>
</div>
