<div class="container-fluid" *ngIf="(navbarLoaded | async)">
    <!-- Info Aggregate -->
    <div class="row">
        <div [class.col-12]="((doubleMonitor$ | async) === false)"
             [class.col-6]="doubleMonitor$ | async"
             [class.d-none]="!boxAttivi || viewState.chiamata.active || viewState.modifica.active || viewState.composizione.active">
            <app-info-aggregate [nightMode]="(nightMode$ | async)" ></app-info-aggregate>
        </div>
    </div>
    <!-- Filterbar -->
    <div class="row">
        <div [class.col-12]="((doubleMonitor$ | async) === false)"
             [class.col-6]="doubleMonitor$ | async"
             [class.mt-3]="!boxAttivi || viewState.chiamata.active || viewState.modifica.active"
             [class.d-none]="viewState.composizione.active">
            <app-filterbar [colorButton]="(colorButton$ | async)"
                           [doubleMonitor]="(doubleMonitor$ | async)"
                           [viewState]="viewState" [nightMode]="(nightMode$ | async)">
            </app-filterbar>
        </div>
    </div>
    <div class="row"
         [class.mt-1]="!boxAttivi && !viewState.chiamata.active && !viewState.modifica.active"
         [class.mt-2]="viewState.chiamata.active || viewState.composizione.active || viewState.modifica.active">
        <div [class.col-6]="(doubleMonitor$ | async)"
             [class.col-12]="(((chiamataConMappa$ | async) === false) || ((doubleMonitor$ | async) === false)) && (viewState.chiamata.active || viewState.modifica.active || viewState.richieste.active || viewState.composizione.active || viewState.mezziInServizio.active || viewState.schedeContatto.active)">
            <!-- Richieste -->
            <app-richieste [class.d-none]="!viewState.richieste.active"
                           [doubleMonitor]="(doubleMonitor$ | async)"
                           [nightMode]="(nightMode$ | async)"
                           [split]="viewState.richieste.split"
                           [boxAttivi]="boxAttivi">
            </app-richieste>
            <!-- Scheda Richiesta -->
            <app-scheda-richiesta *ngIf="viewState.chiamata.active || viewState.modifica.active" [doubleMonitor]="(doubleMonitor$ | async)">
            </app-scheda-richiesta>
            <!-- Composizione Partenza -->
            <app-composizione-partenza *ngIf="viewState.composizione.active"
                                       [doubleMonitor]="(doubleMonitor$ | async)"
                                       [nightMode]="(nightMode$ | async)"
                                       [boxAttivi]="boxAttivi"
                                       [compPartenzaMode]="(composizioneMode$ | async)">
            </app-composizione-partenza>
            <!-- Mezzi in Servizio -->
            <app-mezzi-in-servizio *ngIf="viewState.mezziInServizio.active"
                                   [doubleMonitor]="(doubleMonitor$ | async)"
                                   [nightMode]="(nightMode$ | async)"
                                   [boxAttivi]="boxAttivi">
            </app-mezzi-in-servizio>
            <!-- Schede Contatto -->
            <app-schede-contatto *ngIf="viewState.schedeContatto.active"
                                 [doubleMonitor]="(doubleMonitor$ | async)"
                                 [nightMode]="(nightMode$ | async)"
                                 [boxAttivi]="boxAttivi">
            </app-schede-contatto>
        </div>
        <!-- Mappa -->
        <div class="mt-2"
             [class.col-12]="(((chiamataConMappa$ | async) === false) || ((doubleMonitor$ | async) === false)) && (viewState.mappa.active)"
             [class.col-6]="doubleMonitor$ | async"
             [class.map-translate]="doubleMonitor$ | async"
             [class.d-none]="(((doubleMonitor$ | async) === false) && (viewState.richieste.active || viewState.modifica.active || viewState.composizione.active || viewState.mezziInServizio.active || viewState.schedeContatto.active)) || (((chiamataConMappa$ | async) === false) && (viewState.chiamata.active || viewState.modifica.active))">
            <app-maps [viewStateMappa]="(viewStateMappa$ | async)"
                      [boxAttivi]="boxAttivi"
                      (mapFullLoaded)="onMapFullLoaded()">
            </app-maps>
        </div>
    </div>
</div>
